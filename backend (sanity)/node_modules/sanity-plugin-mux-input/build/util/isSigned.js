"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isSigned = isSigned;
var _areSecretsSignable = require("./areSecretsSignable");
function isSigned(asset, secrets) {
  var _asset$data, _asset$data$playback_, _asset$data$playback_2;
  var isAssetSigned = ((_asset$data = asset.data) === null || _asset$data === void 0 ? void 0 : (_asset$data$playback_ = _asset$data.playback_ids) === null || _asset$data$playback_ === void 0 ? void 0 : (_asset$data$playback_2 = _asset$data$playback_[0]) === null || _asset$data$playback_2 === void 0 ? void 0 : _asset$data$playback_2.policy) === 'signed';
  if (!isAssetSigned) {
    return false;
  }
  if ((0, _areSecretsSignable.areSecretsSignable)(secrets)) {
    return true;
  }
  console.error('Asset is signed', {
    asset
  }, 'but secrets are missing signingKeyId and signingKeyPrivate', secrets);
  throw new TypeError("Unable to access asset as signing keys are missing");
}
//# sourceMappingURL=isSigned.js.map