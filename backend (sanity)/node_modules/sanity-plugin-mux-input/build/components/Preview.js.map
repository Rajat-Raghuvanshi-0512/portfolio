{"version":3,"file":"Preview.js","names":["MuxVideoPreview","value","React","useState","secrets","setSecrets","useEffect","fetchSecrets","then","_secrets","asset","useMemo","status","playbackId","playbackIds","thumbTime","filename","duration","data","playback_ids"],"sources":["../../src/components/Preview.tsx"],"sourcesContent":["import {SanityDefaultPreview} from 'part:@sanity/base/preview'\nimport React, {useEffect, useMemo} from 'react'\n\nimport {fetchSecrets} from '../actions/secrets'\nimport type {MuxAsset, Secrets, VideoAssetDocument} from '../util/types'\nimport {VideoThumbnail} from './VideoSource.styles'\n\nexport interface MuxVideoPreviewProps {\n  value: {\n    playbackId?: VideoAssetDocument['playbackId']\n    status?: VideoAssetDocument['status']\n    thumbTime?: VideoAssetDocument['thumbTime']\n    filename?: VideoAssetDocument['filename']\n    duration?: MuxAsset['duration']\n    playbackIds?: MuxAsset['playback_ids']\n  }\n}\nconst MuxVideoPreview = ({value = {}}: MuxVideoPreviewProps) => {\n  const [secrets, setSecrets] = React.useState<Secrets | null>(null)\n\n  useEffect(() => void fetchSecrets().then(({secrets: _secrets}) => setSecrets(_secrets!)), [])\n\n  const asset = useMemo(() => {\n    if (!value || value.status !== 'ready' || !value.playbackId || !value.playbackIds) return null\n\n    return {\n      playbackId: value.playbackId,\n      status: value.status,\n      thumbTime: value.thumbTime,\n      filename: value.filename,\n      duration: value.duration,\n      data: {playback_ids: value.playbackIds},\n    }\n  }, [value])\n  if (asset && secrets) {\n    return <VideoThumbnail asset={asset} secrets={secrets} width={640} />\n  }\n\n  const {filename, playbackId, status} = value ?? {}\n\n  return (\n    <SanityDefaultPreview\n      title={filename || playbackId || ''}\n      subtitle={status ? `status: ${status}` : null}\n    />\n  )\n}\n\nexport default MuxVideoPreview\n"],"mappings":";;;;;;AAAA;AACA;AAEA;AAEA;AAAmD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYnD,IAAMA,eAAe,GAAG,QAAwC;EAAA,sBAAtCC,KAAK;IAALA,KAAK,2BAAG,CAAC,CAAC;EAClC,sBAA8BC,cAAK,CAACC,QAAQ,CAAiB,IAAI,CAAC;IAAA;IAA3DC,OAAO;IAAEC,UAAU;EAE1B,IAAAC,gBAAS,EAAC,MAAM,KAAK,IAAAC,sBAAY,GAAE,CAACC,IAAI,CAAC;IAAA,IAAWC,QAAQ,SAAjBL,OAAO;IAAA,OAAgBC,UAAU,CAACI,QAAQ,CAAE;EAAA,EAAC,EAAE,EAAE,CAAC;EAE7F,IAAMC,KAAK,GAAG,IAAAC,cAAO,EAAC,MAAM;IAC1B,IAAI,CAACV,KAAK,IAAIA,KAAK,CAACW,MAAM,KAAK,OAAO,IAAI,CAACX,KAAK,CAACY,UAAU,IAAI,CAACZ,KAAK,CAACa,WAAW,EAAE,OAAO,IAAI;IAE9F,OAAO;MACLD,UAAU,EAAEZ,KAAK,CAACY,UAAU;MAC5BD,MAAM,EAAEX,KAAK,CAACW,MAAM;MACpBG,SAAS,EAAEd,KAAK,CAACc,SAAS;MAC1BC,QAAQ,EAAEf,KAAK,CAACe,QAAQ;MACxBC,QAAQ,EAAEhB,KAAK,CAACgB,QAAQ;MACxBC,IAAI,EAAE;QAACC,YAAY,EAAElB,KAAK,CAACa;MAAW;IACxC,CAAC;EACH,CAAC,EAAE,CAACb,KAAK,CAAC,CAAC;EACX,IAAIS,KAAK,IAAIN,OAAO,EAAE;IACpB,oBAAO,6BAAC,2BAAc;MAAC,KAAK,EAAEM,KAAM;MAAC,OAAO,EAAEN,OAAQ;MAAC,KAAK,EAAE;IAAI,EAAG;EACvE;EAEA,YAAuCH,KAAK,aAALA,KAAK,cAALA,KAAK,GAAI,CAAC,CAAC;IAA3Ce,QAAQ,SAARA,QAAQ;IAAEH,UAAU,SAAVA,UAAU;IAAED,MAAM,SAANA,MAAM;EAEnC,oBACE,6BAAC,6BAAoB;IACnB,KAAK,EAAEI,QAAQ,IAAIH,UAAU,IAAI,EAAG;IACpC,QAAQ,EAAED,MAAM,qBAAcA,MAAM,IAAK;EAAK,EAC9C;AAEN,CAAC;AAAA,eAEcZ,eAAe;AAAA"}