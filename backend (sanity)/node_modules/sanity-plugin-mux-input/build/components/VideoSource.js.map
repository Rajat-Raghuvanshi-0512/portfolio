{"version":3,"file":"VideoSource.js","names":["VideoSource","assets","isLoading","secrets","isLastPage","onSelect","onLoadMore","handleClick","useCallback","event","currentTarget","dataset","id","handleKeyPress","key","width","getDevicePixelRatio","maxDpr","map","asset","_id","lineHeight","length","DownloadIcon"],"sources":["../../src/components/VideoSource.tsx"],"sourcesContent":["import {DownloadIcon} from '@sanity/icons'\nimport {Box, Button, Card, Flex, Spinner, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\n\nimport type {Secrets, VideoAssetDocument} from '../util/types'\nimport {CardLoadMore, ThumbGrid, VideoThumbnail} from './VideoSource.styles'\n\nexport interface Props {\n  assets: VideoAssetDocument[]\n  isLoading: boolean\n  isLastPage: boolean\n  secrets: Secrets\n  onSelect: (assetId: string) => void\n  onLoadMore: () => void\n}\n\nexport default function VideoSource({\n  assets,\n  isLoading,\n  secrets,\n  isLastPage,\n  onSelect,\n  onLoadMore,\n}: Props) {\n  const handleClick = useCallback<React.MouseEventHandler<HTMLDivElement>>(\n    (event) => onSelect(event.currentTarget.dataset.id!),\n    [onSelect]\n  )\n  const handleKeyPress = useCallback<React.KeyboardEventHandler<HTMLDivElement>>(\n    (event) => {\n      if (event.key === 'Enter') {\n        onSelect(event.currentTarget.dataset.id!)\n      }\n    },\n    [onSelect]\n  )\n  const width = 200 * getDevicePixelRatio({maxDpr: 2})\n\n  return (\n    <>\n      <Box padding={4}>\n        <ThumbGrid gap={2}>\n          {assets.map((asset) => {\n            return (\n              <Card\n                key={asset._id}\n                as=\"button\"\n                data-id={asset._id}\n                onClick={handleClick}\n                onKeyPress={handleKeyPress}\n                tabIndex={0}\n                radius={2}\n                padding={1}\n                style={{lineHeight: 0}}\n                __unstable_focusRing\n              >\n                <VideoThumbnail asset={asset} secrets={secrets} width={width} />\n              </Card>\n            )\n          })}\n        </ThumbGrid>\n        {isLoading && assets.length === 0 && (\n          <Flex justify=\"center\">\n            <Spinner muted />\n          </Flex>\n        )}\n\n        {!isLoading && assets.length === 0 && (\n          <Text align=\"center\" muted>\n            No videos\n          </Text>\n        )}\n      </Box>\n      {assets.length > 0 && !isLastPage && (\n        <CardLoadMore tone=\"default\" padding={4}>\n          <Flex direction=\"column\">\n            <Button\n              type=\"button\"\n              icon={DownloadIcon}\n              loading={isLoading}\n              onClick={onLoadMore}\n              text=\"Load more\"\n              tone=\"primary\"\n            />\n          </Flex>\n        </CardLoadMore>\n      )}\n    </>\n  )\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAGA;AAA4E;AAAA;AAW7D,SAASA,WAAW,OAOzB;EAAA,IANRC,MAAM,QAANA,MAAM;IACNC,SAAS,QAATA,SAAS;IACTC,OAAO,QAAPA,OAAO;IACPC,UAAU,QAAVA,UAAU;IACVC,QAAQ,QAARA,QAAQ;IACRC,UAAU,QAAVA,UAAU;EAEV,IAAMC,WAAW,GAAG,IAAAC,kBAAW,EAC5BC,KAAK,IAAKJ,QAAQ,CAACI,KAAK,CAACC,aAAa,CAACC,OAAO,CAACC,EAAE,CAAE,EACpD,CAACP,QAAQ,CAAC,CACX;EACD,IAAMQ,cAAc,GAAG,IAAAL,kBAAW,EAC/BC,KAAK,IAAK;IACT,IAAIA,KAAK,CAACK,GAAG,KAAK,OAAO,EAAE;MACzBT,QAAQ,CAACI,KAAK,CAACC,aAAa,CAACC,OAAO,CAACC,EAAE,CAAE;IAC3C;EACF,CAAC,EACD,CAACP,QAAQ,CAAC,CACX;EACD,IAAMU,KAAK,GAAG,GAAG,GAAG,IAAAC,wCAAmB,EAAC;IAACC,MAAM,EAAE;EAAC,CAAC,CAAC;EAEpD,oBACE,yEACE,6BAAC,OAAG;IAAC,OAAO,EAAE;EAAE,gBACd,6BAAC,sBAAS;IAAC,GAAG,EAAE;EAAE,GACfhB,MAAM,CAACiB,GAAG,CAAEC,KAAK,IAAK;IACrB,oBACE,6BAAC,QAAI;MACH,GAAG,EAAEA,KAAK,CAACC,GAAI;MACf,EAAE,EAAC,QAAQ;MACX,WAASD,KAAK,CAACC,GAAI;MACnB,OAAO,EAAEb,WAAY;MACrB,UAAU,EAAEM,cAAe;MAC3B,QAAQ,EAAE,CAAE;MACZ,MAAM,EAAE,CAAE;MACV,OAAO,EAAE,CAAE;MACX,KAAK,EAAE;QAACQ,UAAU,EAAE;MAAC,CAAE;MACvB,oBAAoB;IAAA,gBAEpB,6BAAC,2BAAc;MAAC,KAAK,EAAEF,KAAM;MAAC,OAAO,EAAEhB,OAAQ;MAAC,KAAK,EAAEY;IAAM,EAAG,CAC3D;EAEX,CAAC,CAAC,CACQ,EACXb,SAAS,IAAID,MAAM,CAACqB,MAAM,KAAK,CAAC,iBAC/B,6BAAC,QAAI;IAAC,OAAO,EAAC;EAAQ,gBACpB,6BAAC,WAAO;IAAC,KAAK;EAAA,EAAG,CAEpB,EAEA,CAACpB,SAAS,IAAID,MAAM,CAACqB,MAAM,KAAK,CAAC,iBAChC,6BAAC,QAAI;IAAC,KAAK,EAAC,QAAQ;IAAC,KAAK;EAAA,eAG3B,CACG,EACLrB,MAAM,CAACqB,MAAM,GAAG,CAAC,IAAI,CAAClB,UAAU,iBAC/B,6BAAC,yBAAY;IAAC,IAAI,EAAC,SAAS;IAAC,OAAO,EAAE;EAAE,gBACtC,6BAAC,QAAI;IAAC,SAAS,EAAC;EAAQ,gBACtB,6BAAC,UAAM;IACL,IAAI,EAAC,QAAQ;IACb,IAAI,EAAEmB,mBAAa;IACnB,OAAO,EAAErB,SAAU;IACnB,OAAO,EAAEI,UAAW;IACpB,IAAI,EAAC,WAAW;IAChB,IAAI,EAAC;EAAS,EACd,CACG,CAEV,CACA;AAEP"}